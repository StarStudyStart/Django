<html>
<head>
  <title>listview不能响应OnItemClickListener</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600718 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="896"/>
<h1>listview不能响应OnItemClickListener</h1>

<div><span><div><span style="font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun; color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);"><strong>      当listview中包含button，checkbox等控件的时候，android会默认将focus给了这些控件，也就是说listview的item根本就获取不到focus，所以导致onitemclick时间不能触发。</strong></span></div><div><span style="font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun; color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);">   </span></div><div><span style="font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun; color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);">       既然我们知道了，发生的原因，那么我们就将button等控件的在xml布局文件中的属性android:focusable设置为false，就ok了，但通常不这样做，因为要一个一个地修改button太麻烦，通常可以修改这些button的父容器的descendantFocusability属性为false，</span></div><div><span style="font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(68, 68, 68);"><br/></span></span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; border-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); background-color: rgb(251, 250, 248);"><div><span style="font-size: 18px;"><span style="color: rgb(102, 102, 102); font-family: Monaco, Consolas, &quot;font-size:12px;} &quot;; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; display: inline !important; background-color: rgb(255, 255, 255);"> android:descendantFocusability=&quot;blocksDescendants&quot;</span></span>

</div></div><div><span style="font-family: Monaco, Consolas, &quot;font-size:12px;} &quot;;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></div><div><span style="font-family: Monaco, Consolas, &quot;font-size:12px;} &quot;;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);">2、 根据当前类型，来判断应该加在哪种布局。</span></span></span></div><div>

<div style="margin: 0px !important; padding: 0px 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: left; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-weight: normal; font-style: normal; font-size: 12px; min-height: auto !important; white-space: normal; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: none rgb(255, 255, 255) !important;"><code style="margin: 0px !important; padding: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; font-weight: normal !important; font-style: normal !important; font-size: 12px !important; min-height: auto !important; white-space: pre-wrap; background: none !important;">        </code></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><div>@Override</div><div>        public View getView(int position, View convertView, ViewGroup parent) {</div><div>            ViewHolder holder = null;</div><div>            int type = getItemViewType(position);</div><div>            System.out.println(&quot;getView &quot; + position + &quot; &quot; + convertView + &quot; type = &quot; + type);</div><div>            if (convertView == null) {</div><div>                holder = new ViewHolder();</div><div>                switch (type) {</div><div>                    case TYPE_ITEM:</div><div>                        convertView = mInflater.inflate(R.layout.item1, null);</div><div>                        holder.textView = (TextView)convertView.findViewById(R.id.text);</div><div>                        break;</div><div>                    case TYPE_SEPARATOR:</div><div>                        convertView = mInflater.inflate(R.layout.item2, null);</div><div>                        holder.textView = (TextView)convertView.findViewById(R.id.textSeparator);</div><div>                        break;</div><div>                }</div><div>                convertView.setTag(holder);</div><div>            } else {</div><div>                holder = (ViewHolder)convertView.getTag();</div><div>            }</div><div>            holder.textView.setText(mData.get(position));</div><div>            return convertView;</div><div>        }</div></div></div><div style="margin: 0px !important; padding: 0px 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: left; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-weight: normal; font-style: normal; font-size: 12px; min-height: auto !important; white-space: normal; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: none rgb(255, 255, 255) !important;"><div><br/></div></div><div style="margin: 0px !important; padding: 0px 1em !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: left; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace; font-weight: normal; font-style: normal; font-size: 12px; min-height: auto !important; white-space: normal; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: none rgb(255, 255, 255) !important;"><div><code style="margin: 0px !important; padding: 0px !important; border-radius: 0px !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; font-weight: normal !important; font-style: normal !important; font-size: 12px !important; min-height: auto !important; white-space: pre-wrap; background: none !important;"> </code> 3、关于跳转界面之后adapter.notifyDataSetChanged();方法不能调用的问题</div><div><br/></div><div>查阅网上的资料后发现在onResume（）方法重要重新调用view.setAdapter();才会生效</div><div><br/></div><div>猜想：1、跳转界面后原界面的onStop()方法中，自动解绑了adapter，数据清除；</div><div>     2、跳转界面后，原界面自动销毁。</div><div><br/></div><div>？  为什么跳转界面后setAdapter()会失效。、</div><div><br/></div><div>在这个方法创建之初，就已经绑定了adapter，为什么跳转界面之后SetAdapte就是失效了。</div></div>

</div><div><span style="font-family: Monaco, Consolas, &quot;font-size:12px;} &quot;;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></div><div><span style="font-family: Monaco, Consolas, &quot;font-size:12px;} &quot;;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></div><div><span style="font-family: Monaco, Consolas, &quot;font-size:12px;} &quot;;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);">但是如果使用startForResultActivity()就不会出现这种情况；</span></span></span></div></span>
</div></body></html> 